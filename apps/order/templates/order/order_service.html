{% extends "temporary/mother_panel.html" %}
{% load static staticfiles %}

{% block internal_css %}
<style>
.popup {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.popup .popuptext {
  visibility: hidden;
  display: none;
}

.popup .show {
  visibility: visible;
  -webkit-animation: fadeIn 1s;
  animation: fadeIn 1s;
}

@-webkit-keyframes fadeIn {
  from {opacity: 0;}
  to {opacity: 1;}
}

@keyframes fadeIn {
  from {opacity: 0;}
  to {opacity:1 ;}
}
    .greenbtn {
        background-color: rgb(56,208,30);
        color: #eeeeee;
        border: 1px solid rgb(56,208,30);
        min-width: 100px;
        font-size: 16px;
        display: block;
        margin: 20px auto;
    }
    .greenbtn:hover {
        color: rgb(56,208,30);
        background-color: #eeeeee;
    }

    .graybtn {
        background-color: #bbbbbb;
        color: #eeeeee;
        border: 1px solid #bbbbbb;
        min-width: 100px;
        font-size: 16px;
        display: block;
        margin: 20px auto;
        cursor: not-allowed;
    }

    .purplebtn {
        background-color: rgb(188,91,254);
        color: #eeeeee;
        border: 1px solid rgb(188,91,254);
        min-width: 100px;
        font-size: 16px;
        display: block;
        margin: 20px auto;
    }

    .purplebtn:hover {
        color: rgb(188,91,254);
        background-color: #eeeeee;
    }




</style>
{% endblock internal_css %}

{% block banner_content %}
<h2>Submit Primer</h2>
<div class="page_link">
    <a href="index.html">Home</a>
    <a href="elements.html">Services</a>
    <a href="elements.html">Primer</a>
    <a href="elements.html">Submit Primer</a>
</div>
{% endblock banner_content %}

{% block main_content %}
<div class="multi-step container">
    <div class="col-lg-2">
        <div id="progress_btn_1" class="circle btn-success">1</div>
        <label class="progress-bar-label">ثبت مشخصات فاکتور شونده</label>
    </div>
    <div class="col-lg-1 connecting-line"></div>
    <div class="col-lg-2">
        <div id="progress_btn_2" class="circle btn-primary">2</div>
        <label class="progress-bar-label">ثبت اطلاعات توالی‌ها</label>
    </div>
    <div class="col-lg-1 connecting-line"></div>
    <div class="col-lg-2">
        <div id="progress_btn_3" class="circle">3</div>
        <label class="progress-bar-label">تایید اطلاعات توالی‌ها</label>
    </div>
    <div class="col-lg-1 connecting-line"></div>
    <div class="col-lg-2">
        <div id="progress_btn_4" class="circle">4</div>
        <label class="progress-bar-label">دریافت کد رهگیری</label>
    </div>
</div>
<!--================Start Section2 =================-->
<div id="sec2" class="whole-wrap" dir="rtl"
     style="display: block; text-align: right; font-family: FarsiFont; font-size: 16px;">
    <div class="container">
        <div class="section-top-border">
            <div class="row">
                <div class="col-lg-11 col-md-8" style="margin: auto">

                    <h5>
                        برای پر کردن اطلاعات، شما باید ابتدا یکی از دو روش زیر را انتخاب کنید.
                    </h5>
                    ‌
                    <div class="submit_service_register_parts">
                        <input type="radio" name="type_1" id="type_1" style="display: inline-block;"
                               onclick="radiochanged(1)">
                        <h5 style="display: inline-block">روش اول:</h5>
                        <div style="font-size: 20px; display: inline-block">در این روش، شما باید ابتدا فایل اکسل
                            داده شده را دانلود کرده و
                            سپس تکمیل شده‌ی آن را آپلود کنید.
                        </div>
                        <div id="div_type_1"
                             style="margin: auto; display: flex; height: 100%; transition: 1s;">
                            <a style="transition: 1s;" id="div_type_1_btn_1"
                               href="{% static 'primer.xls' %}" download class="submit_service_excel">دانلود فایل
                                نمونه</a>
                            <a style="transition: 1s;" id="div_type_1_btn_2"
                               href="{% static 'primer.xls' %}" download class="submit_service_excel">درگاه
                                آپلود</a>
                        </div>
                    </div>

                    <div class="submit_service_register_parts">
                        <input type="radio" name="type_2" id="type_2" style="display: inline-block;"
                               onclick="radiochanged(2)">
                        <h5 style="display: inline-block">روش دوم:</h5>
                        <div style="font-size: 20px; display: inline-block">در این روش، شما باید جزئیات توالی‌های
                            خود را از
                            طریق جدول زیر، وارد کنید.
                        </div>
                        <div style="height: 100%; transition: 1s; text-align: center;" id="div_type_2">
                            <form method="post">
                                {% csrf_token %}
                                <table dir="ltr" id="table" lang="en">
                                    <thead>
                                    <tr style="font-size: 12px;">
                                        <th>#</th>
                                        {% for field in form %}
                                        <th>{{ field.label }}</th>
                                        {% endfor %}
                                        <th>change</th>
                                    </tr>
                                    </thead>
                                    {% for row in data %}
                                    <tr style="font-size: 12px;">
                                        <td>{{forloop.counter}}</td>
                                        {% for field in row %}
                                        <td style="padding: 0 5px; font-size: 15px;">{{field}}</td>
                                        {% endfor %}
                                        <td>
                                            {% with y=forloop.counter|stringformat:"s" %}
                                            <div onclick="myFunction({{forloop.counter}})"
                                                 class="popup btn text-danger circle"
                                                 style="font-size: 15px; min-width: 80px; display: block;
                                                 ">
                                                {% with id="id"|add:y %}
                                                <div id="{{id}}">delete</div>
                                                {% endwith %}
                                                {% with mypopup="myPopup"|add:y %}
                                                <div class="popuptext" id="{{mypopup}}">
                                                {% endwith %}
                                                    <div onclick="myFunction({{forloop.counter}})"
                                                         class="popup btn text-danger circle"
                                                         style="font-size: 15px; min-width: 80px; display: block;"
                                                    >Are you sure?
                                                        <button type="submit" onclick="myDelete({{ y }})"
                                                                class="popup btn text-danger circle"
                                                                style="font-size: 15px; background: none;">yes
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            {% endwith %}
                                        </td>
                                    </tr>
                                    {% endfor %}
                                    <tr style="font-size: 12px;" id="1">
                                        <td></td>
                                        {% for field in form %}
                                        <td style="padding: 0 5px;">{{field}}</td>
                                        {{field.errors}}
                                        {% endfor %}
                                        <td style="text-align: center;"><button type="submit" class="btn generic-btn text-success"
                                                    style="font-size: 15px; width: 100%; display: block; background: none;
                                                 ">add</button></td>
                                    </tr>
                                </table>
                            </form>
                        </div>
                    </div>
                    <div class="pager">
                        <a class="genric-btn purplebtn circle" onclick="goto(3, 2)"
                           style="float: left; margin: 10px; display: inline-block">ادامه
                        </a>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--================End Section2 =================-->
{% endblock main_content %}


{% block script %}
<script>
    function myFunction(id) {
        var popup = document.getElementById("myPopup"+id);
        popup.classList.toggle("show");
    }
    function myDelete(i) {
        $("#id_news_id").val(i);
    }
    var form_count = 1;
    $("#addbtn").click(function() {
        form_count = form_count + 1;
        var newrow = $("#temp_row").clone().attr("id", "row_"+form_count);
        newrow.append("<td>"+form_count+"</td>");
        var count = $("#first_row").children().length;
        for(var i = 2; i <= count; i ++){
            var newtd = $("#first_row td:nth-child(" + i + ")").clone();
            newtd.children().attr("id", newtd.children().attr('id') + form_count);
            newtd.children().attr("name", newtd.children().attr('name') + form_count);
            newtd.children().val('');
            newrow.append(newtd);
        }
        $('#table').append(newrow);

        $("[name=extra_field_count]").val(form_count);
    });

    function changed () {
        var value = $('#checkbox').prop("checked");
        if (value == true) {
            $('#btn').css('display', 'inline-block');
            $('#btn1').css('display', 'none');
        }
        if (value == false) {
            $('#btn1').css('display', 'inline-block');
            $('#btn').css('display', 'none');
        }
    }

    function radiochanged (id) {
        if ($('#type_'+id).prop("checked") == true){
            $('#type_'+(3-id)).prop("checked", false)
            if (id == 2) {
                $('#div_type_1').css("height", "0px");
                $('#div_type_1_btn_1').css("opacity", 0);
                $('#div_type_1_btn_1').css("visibility", "hidden");
                $('#div_type_1_btn_2').css("opacity", 0);
                $('#div_type_1_btn_2').css("visibility", "hidden");
                $('#div_type_2').css("height", "100%");
                $('#table').css("opacity", 1);
                $('#table').css("visibility", "visible");
                $('#addbtn').css("opacity", 1);
                $('#addbtn').css("visibility", "visible");
            }
            if (id == 1) {
                $('#div_type_1').css("height", "100%");
                $('#div_type_1_btn_1').css("opacity", 1);
                $('#div_type_1_btn_1').css("visibility", "visible");
                $('#div_type_1_btn_2').css("opacity", 1);
                $('#div_type_1_btn_2').css("visibility", "visible");
                $('#div_type_2').css("height", "0px");
                $('#table').css("opacity", 0);
                $('#table').css("visibility", "hidden");
                $('#addbtn').css("opacity", 0);
                $('#addbtn').css("visibility", "hidden");
            }
        }
    }

    function goto (i, j) {
        var body = $("html, body");
        body.stop().animate({scrollTop:200}, 500, 'swing');
        var id = "sec"+i;
        $("#sec1").css('display', 'none');
        $("#sec2").css('display', 'none');
        $("#sec3").css('display', 'none');
        $("#sec4").css('display', 'none');
        $("#"+id).css('display', 'block');
        $("#progress_btn_"+i).addClass("btn-primary");
        $("#progress_btn_"+i).removeClass("btn-muted");
        $("#progress_btn_"+i).removeClass("btn-success");
        if (j > i) {
            $("#progress_btn_"+j).removeClass("btn-primary");
            $("#progress_btn_"+j).addClass("btn-muted");
            $("#progress_btn_"+j).removeClass("btn-success");
        }
        else {
            $("#progress_btn_"+j).removeClass("btn-primary");
            $("#progress_btn_"+j).removeClass("btn-muted");
            $("#progress_btn_"+j).addClass("btn-success");
        }
        return false;
    }






</script>
{% endblock script %}